<!DOCTYPE html>
<html>
<head>
    <title>Budget Tracker</title>

    <!-- Styles -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">

    <style>
        /* NAVBAR */
        nav {
            background: rgba(15, 20, 35, 0.55);
            padding: 14px 30px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 18px rgba(0,0,0,0.45);
            position: sticky;
            top: 0;
            z-index: 999;
            border-bottom: 1px solid rgba(255,255,255,0.06);
        }

        .navlink {
            color: #e5e7eb;
            text-decoration: none;
            font-weight: 500;
            padding: 6px 10px;
            transition: 0.25s;
        }
        .navlink:hover {
            color: #60a5fa;
            transform: translateY(-1px);
        }

        /* Avatar Bubble */
        .avatar {
            width: 26px;
            height: 26px;
            background: #60a5fa;
            border-radius: 50%;
            display: inline-flex;
            justify-content: center;
            align-items: center;
            color: #0f172a;
            font-size: 14px;
            font-weight: 700;
            margin-right: 6px;
        }

        /* Flash Toast */
        .toast-message {
            position: fixed;
            bottom: 30px;
            right: 30px;
            padding: 14px 24px;
            background: rgba(255, 255, 255, 0.12);
            color: white;
            backdrop-filter: blur(12px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.35);
            font-size: 16px;
            z-index: 1000;
            animation: slideUp 0.6s ease forwards;
            opacity: 0;
        }

        .toast-success { border-left: 4px solid #00d26a; }
        .toast-error   { border-left: 4px solid #ff4141; }

        @keyframes slideUp {
            from { transform: translateY(30px); opacity: 0; }
            to   { transform: translateY(0); opacity: 1; }
        }
    </style>
</head>


<body>

<!-- ================= NAVBAR ================= -->
<nav>
    <div style="display:flex; align-items:center; justify-content:space-between;">

        <!-- LEFT SIDE: Logo + Username -->
        <div style="display:flex; flex-direction:column;">
            
            <span style="font-size:22px; font-weight:700; color:#60a5fa; cursor:default;">
                Budget Tracker
            </span>

            {% if session.get('username') %}
            <span style="font-size:14px; color:#cbd5e1; margin-top:3px; display:flex; align-items:center;">
                <span class="avatar">
                    {{ session['username'][0].upper() }}
                </span>
                Hi, {{ session['username'] }}
            </span>
            {% endif %}
        </div>

        <!-- RIGHT SIDE NAV LINKS -->
        <div style="display:flex; gap:25px; font-size:16px;">

            {% if session.get('user_id') %}
                <a href="/home2" class="navlink">Home</a>
                
                <a href="/log_expense" class="navlink">Log Expense</a>
                <a href="/dashboard" class="navlink">Dashboard</a>
                <a href="/insights" class="navlink">Insights</a>
                <a href="/logout" class="navlink" style="color:#f87171;">Logout</a>

            {% else %}
                <a href="/" class="navlink">Home</a>
                <a href="/login" class="navlink">Login</a>
                <a href="/signup" class="navlink">Sign Up</a>
            {% endif %}
        </div>

    </div>
</nav>


<!-- ================= CONTENT WRAPPER ================= -->
<div class="container mt-4">
    {% block content %}{% endblock %}
</div>


<!-- ðŸ”” Flash Messages -->
{% with messages = get_flashed_messages(with_categories=true) %}
{% if messages %}
<script>
window.onload = function () {
    {% for category, message in messages %}
        const toast = document.createElement("div");
        toast.className = "toast-message toast-{{ category }}";
        toast.innerText = "{{ message }}";
        document.body.appendChild(toast);

        setTimeout(() => {
            toast.style.transition = "0.4s";
            toast.style.opacity = "0";
            setTimeout(() => toast.remove(), 500);
        }, 2200);
    {% endfor %}
};
</script>
{% endif %}
{% endwith %}



<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
